define(["jquery","template","tools","CKEDITOR","validate","form"],function(e,t,s,c){s.expandMenu(),s.setMenu("/course/add");var i=s.getSearch();e.ajax({url:"/api/course/basic",type:"get",data:{cs_id:i.cs_id},success:function(s){if(200==s.code){console.log(s.result);var i=t("step1Tpl",s.result);e(".steps").html(i),c.replace("cs_brief")}}}),e(".steps").on("change","#cs_cg_pid",function(){e.ajax({url:"/api/category/child",type:"get",data:{cg_id:this.value},success:function(t){if(200==t.code){var s=t.result.map(function(e){return'<option value="'+e.cg_id+'">'+e.cg_name+"</option>"});s.unshift("<option>请选择</option>"),e("#cs_cg_id").html(s.join(""))}}})}),e(".steps").on("submit","#add_step1_form",function(){for(var t in c.instances)c.instances[t].updateElement();return e(this).ajaxSubmit({url:"/api/course/update/basic",type:"post",success:function(e){200==e.code&&(location.href="/course/add_step2?cs_id="+e.result.cs_id)}}),!1})});